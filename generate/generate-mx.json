{
    "id": "generate-mx",
    "name": "Generate MX Message",
    "description": "Generates sample ISO 20022 MX messages using the schema provided in the payload",
    "priority": 1,
    "condition": {
        "in": [
            {
                "substr": [{"var": "metadata.message_type"}, 0, 5]
            },
            ["pacs.", "pain.", "camt.", "admi."]
        ]
    },
    "tasks": [
        {
            "id": "generate_mx_sample",
            "name": "Generate MX Sample",
            "description": "Uses the generate_mx function to create sample MX message from schema",
            "function": {"name": "generate_mx", "input": {"target": "sample_json"}}
        },
        {
            "id": "publish_mx_output",
            "name": "Publish MX Output",
            "description": "Formats the generated MX message for output",
            "function": {"name": "publish_mx", "input": {"source": "sample_json", "target": "result"}}
        }
    ]
}
